<!DOCTYPE html>
<html lang="en">

  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Top Term - Practice</title>

    <!-- Bootstrap core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom fonts for this template -->
    <link href="vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

    <!-- Custom styles for this template -->
    <link href="css/clean-blog.min.css" rel="stylesheet">
      <link href="css/notosanstc.css" rel="stylesheet">

      <style>
          @import url(http://fonts.googleapis.com/earlyaccess/notosanstc.css);
          body {
            font-family: 'Noto Sans TC', sans-serif;
          }
          .word{
              font-size: 2em;
          }
          .answer{
              font-family: 'Noto Sans TC', sans-serif;
              font-size: 6em;
          }
        
      
      </style>

  </head>

  <body>

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
      <div class="container">
        <a class="navbar-brand" onclick="add_data();">Save</a>
        <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
          Menu
          <i class="fa fa-bars"></i>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
          <ul class="navbar-nav ml-auto">
                  
          </ul>
        </div>
      </div>
    </nav>

    <!-- Page Header -->
    <header class="masthead" style="background-image: url('img/800724.jpg')">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-md-10 mx-auto">
            <div class="page-heading">
                <div class='word' id='word'></div>
              <span class="subheading"></span>
            </div>
          </div>
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <div class="container">
      <div class="row">
        <div class="col-md-12 mx-auto">
          <!-- Contact Form - Enter your email address on line 19 of the mail/contact_me.php file to make this form work. -->
          <!-- WARNING: Some web hosts do not allow emails to be sent through forms to common mail hosts like Gmail or Yahoo. It's recommended that you use a private domain email address! -->
          <!-- NOTE: To use the contact form, your site must be on a live web host with PHP! The form will not work locally! -->
          <div>
            <div class="control-group">
              <div class="form-group floating-label-form-group controls">
                <label></label>
                <input type="text" class="form-control" id="my_answer" style="font-family: 'Noto Sans TC', sans-serif;font-size: 4em;">   
              </div>
            </div>            
            <br>
            <div id="success"></div>
            <div class="form-group">
              <button class="btn btn-secondary" id="btn" onclick="send();">Send</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <hr>

    <!-- Footer -->
    <footer>
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-md-10 mx-auto">
            <ul class="list-inline text-center">
              <li class="list-inline-item">
                <a href="#">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li class="list-inline-item">
                <a href="#">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li class="list-inline-item">
                <a href="#">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
            </ul>
            <p class="copyright text-muted">Copyright &copy; Your Website 2017</p>
          </div>
        </div>
      </div>
    </footer>

    <!-- Bootstrap core JavaScript -->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/popper/popper.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.min.js"></script>

    <!-- Contact Form JavaScript -->
    <script src="js/jqBootstrapValidation.js"></script>
    <script src="js/contact_me.js"></script>

    <!-- Custom scripts for this template -->
    <script src="js/clean-blog.min.js"></script>
      <script src="https://www.gstatic.com/firebasejs/5.0.0/firebase.js"></script>

      <script>
          

          var config = {
            apiKey: "AIzaSyBaINk2-3m_qieit3noR6KdKKm3qRAfEhI",
            authDomain: "typing-counter.firebaseapp.com",
            databaseURL: "https://typing-counter.firebaseio.com",
            projectId: "typing-counter",
            storageBucket: "typing-counter.appspot.com",
            messagingSenderId: "48164465117"
          };
            
            // 初始化 app
            firebase.initializeApp(config);
            // 取得資料庫物件
            var database = firebase.database() ;
            
            
            var basic_path= "/chung-ze/listen/" ;
            var all_data={} ;                  
            var n = 0 ;
          
            $( document ).ready(function() {
                
                var d = prompt('請輸入今天日期，如 107/6/12，請輸入 1070612') ;
                basic_path = basic_path + d.trim() ;

                // Get the input field
                var input_ans = document.getElementById("my_answer");
                // Execute a function when the user releases a key on the keyboard
                input_ans.addEventListener("keyup", check);
                
                get_data();
            });      
          
          
          
        function check(event){
                event.preventDefault();
                // Number 13 is the "Enter" key on the keyboard
                if (event.keyCode === 13) {
                    
                    var ans = document.getElementById('my_answer').value.trim() ;     
                    if( all_data == null){
                        all_data = {} ;
                    }
                    all_data[(++n)] = ans ; 
                    document.getElementById('my_answer').value='';
                }
          }
                
          
          
          
            
        function get_data(){
                // 資料位置
                var ref = database.ref(  basic_path ) ;
                // 建立資料更新時的方法
                ref.on( 'value' , read_data);                
                function read_data( snapshot ){
                    all_data = snapshot.val() ;
                    console.log( all_data) ;
                    for( var k in all_data){
                        if( parseInt(k)>n){
                            n = parseInt(k) ;
                        }
                    }
                }                
            }             
          
            function add_data(){
                                
                // 資料位置
                var ref = database.ref( basic_path);
                // 設置資料
                ref.set(all_data) ;               
                alert('OK');
            }
          
          function show_all_data(b){
              var a = 0 ;
                for( var k in all_data){
                    
                     a++ ;
                    
                    if( b ){
                        console.log(a+' ---> '+k+','+ all_data[k] ); 
                    }else{
                        console.log(k+','+ all_data[k] ); 
                    }
                }
          }
          
          
      </script>
      
  </body>

</html>
