<!Doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0-alpha2/katex.min.css" integrity="sha384-exe4Ak6B0EoJI0ogGxjJ8rn+RN3ftPnEQrGwX59KTCl5ybGzvHGKjhPKk/KC3abb" crossorigin="anonymous">
        <style>
            table{
                font-size: 20px;
            }
            tr{
            	height: 120px ;
            }
            input{
            	max-width: 30px;
                text-align: center;
            }
            b{
                color: blue ;
            }
            .katex { font-size: 2em; }
            .answer{
                visibility: hidden;
                text-align: right;
                color: blue;
            }
        </style>
    </head>
    <body>
         
        
        
        <table>        	
            <thead>
                <th></th>
                <th></th>
                <th></th>
                
            </thead>
            <tbody id="data">
                
                <tr>
                    <td colspan="3"><h3>練習題</h3></td>
                    <td><button style="height: 50px;width: 100px;" onclick="check();">檢視答案</button></td>
                </tr>
                
               
            </tbody>        	
        </table>
       
    </body>
    <script src="lib/algebra-0.2.6.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0-alpha2/katex.min.js" integrity="sha384-OMvkZ24ANLwviZR2lVq8ujbE/bUO8IR1FdBrKLQBI14Gq5Xp/lksIccGkmKL8m+h" crossorigin="anonymous"></script>
    
    <script>
        
        
        var Fraction = algebra.Fraction;
        var Expression = algebra.Expression;
        var Equation = algebra.Equation;        
        
        var no = 1 ;        
        
        function eq_type1_prepare( target , n ){
            
            for(var i=1 ; i<=n ; i++){

                target.innerHTML = target.innerHTML 
                    +"<tr><td> ("+i+") </td>"
                    +"<td id='q"+i+"' style='width: 300px;text-align: left;'></td>"
                    +"<td></td>"
                    +"<td id='qa"+i+"' class='answer'</td>"                   
                    +"</tr>" ;                   
                
            }
            
            
        }
        function eq_type1(n ){
            
            for(var i=1 ; i<=n ; i++){
                var q  = document.getElementById('q'+i);
                var qa = document.getElementById('qa'+i);
                eq(q,qa) ;           
                
            }
            
            
        }        
        
        
        function eq( target , target_answer){
            
            var t = ['\\le','\\ge' , '\\lt' , '\\gt' ] ;
            
            var tags = [] ;
            tags[t[0]]=t[1] ;
            tags[t[1]]=t[0] ;
            tags[t[2]]=t[3] ;
            tags[t[3]]=t[2] ;
            
            do{
                    var x   = new Expression("x");
                    var n1  = genNumber(7,true) ;
                    var f1  = x.multiply(n1);            
                    f1 = f1.add( genNumber(5,true) ) ;

                    var f2 = genNumber(5,true) ; 
                    
                    var target_sym = t[ Math.floor(Math.random()*4) ] ;
                    var render_context = f1+" "+target_sym+" "+f2 ;
                    
                    var eq = new Equation(f1,f2);   
                    try{
                        var answer = eq.solveFor("x");
                    }catch(err){
                        
                    }
            }while( answer==null)
                    //console.log("x = "+answer.toString());
                    var eq_ans ; 
                    if( n1 > 0 ){
                        eq_ans = 'x '+target_sym+' '+algebra.toTex(answer);
                    }else{
                        eq_ans = 'x '+tags[target_sym]+' '+algebra.toTex(answer);
                    }
            
                    
                    katex.render( render_context , target);    
            
                    katex.render( eq_ans , target_answer);
        }
        
        
        function genNumber( top , negative ){

        	var n = Math.floor(Math.random()*top)+2;
        	if( negative ){
                if( Math.random() > 0.5 ){
                    return n ;
                }else{
                    return n*(-1) ;
                }
            }else{
                return n ;
            }
        }

        function genPolar(){
            return Math.random()>0.5?1:-1;
        }
        
        
        function check(){
        
            var input = prompt("準備好看答案了嗎？ 是的話請輸入 y") ;
	       if( input=='y'){
               var its = document.getElementsByClassName('answer') ;
               for( var i=0 ; i<its.length ; i++){
                   its[i].style.visibility = "visible"; 
               }
           }


        }
        
        var e = document.getElementById("data") ;
        eq_type1_prepare(e , 5) ;
        eq_type1(5) ;
        //-----------------------------------------
        
        
  
        
    </script>
</html>
