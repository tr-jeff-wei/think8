<!Doctype html>
<html>
    <head>
        <meta charset="utf-8">
      
        <style>
            table{
                font-size: 20px;
            }
            tr{
            	height: 40px ;
            }
            input{
            	max-width: 30px;
                text-align: center;
            }
            b{
                color: blue ;
            }
        
        </style>
    </head>
    <body>
         
        
        
        <table>        	
            <thead>
                <th></th>
                <th></th>
                <th></th>
                <th></th>
            </thead>
            <tbody id="data">
                <tr>
                    <td>範例：回答<b>正確</b></td>
                    <td style="width: 300px;text-align: right;">5 -2 ( 3x ＋4 ) </td>
                    <td style="width: 30px;text-align: center;"> = </td>
                    <td style="background-color: lightgreen;">
                        <input data-a="-3" value="-3"> ＋ <input data-a="-6" value="-6"> x
                    </td>
                </tr>
                <tr>
                    <td>範例：回答<b>錯誤</b></td>
                    <td style="width: 300px;text-align: right;">5 -2 ( 3x ＋4 ) </td>
                    <td style="width: 30px;text-align: center;"> = </td>
                    <td style="background-color: rgb(255, 89, 89);">
                        <input data-a="-3" value="2"> ＋ <input data-a="-6" value="4"> x
                    </td>
                </tr> 
                <tr></tr>
                <tr>
                    <td><h3>練習題</h3></td>
                    <td colspan="2" style="width: 300px;text-align: right;">完成後請按鈕 >>></td>                    
                    <td><button style="height: 50px;width: 100px;" onclick="check();">檢查答案</button></td>
                </tr>
            </tbody>        	
        </table>
       
    </body>
    
    <script>
        
        var no = 1 ;        
        
        function q_type1( target , n ){
            
            for(var i=0 ; i<n ; i++){
            
                // i / ix
                var a = genNumber(9) ;
                // i
                var b = genNumber(9) ;
                // i
                var c = genNumber(9) ;
                // ix
                var d = genNumber(9) ;
           
                // a 是否加 x
                var ans_i = 0 ;
                var ans_ix =0 ;
                if( Math.random()>0.5){
                	// a for i
                	ans_ix = b*d ;
                	ans_i  = a+(b*c) ;
                }else{
                	// a for ix
                	ans_ix = a+b*d ;
                	ans_i  = b*c ;
                	a = a+"x"
                }
                
                var t1 = print_function( a,b,c,d ) ;

                target.innerHTML = target.innerHTML 
                    +"<tr><td> "+(no++)+". </td>"
                    +"<td style='width: 300px;text-align: right;'>"+ t1 +"</td>"
                    +"<td style='width: 30px;text-align: center;'> = </td>"
                    +"<td><input data-a='"+ans_i+"'> ＋ <input data-a='"+ans_ix+"'> x</td>"
                    +"</tr>" ;    
                

            }
            
        }
        

        
        function genNumber( top ){

        	var n = Math.floor(Math.random()*top)+2;
        	if( Math.random() > 0.5 ){
        		return n ;
        	}else{
        		return n*(-1) ;
        	}
        }

        function print_function( a , b , c , d){
            
            var result;
            
            

            var r1 = Math.random();
            var r2 = Math.random();
            if( r1>0.5){
	  	d=add_plus_symbol(d) ;
                	
                	if(r2>0.5){
                		b = add_plus_symbol(b) ;
                		result = a+" "+b+" ( "+c+" "+d+"x ) " ;
                	}else{
                		a = add_plus_symbol(a) ;
                		result = b+" ( "+c+" "+d+"x ) "+a ;

                	}
            }else{
            	c=add_plus_symbol(c) ;
                	
                	if(r2>0.5){
                		b = add_plus_symbol(b) ;
                		result = a+" "+b+" ( "+d+"x "+c+" ) " ;
                	}else{
                		a = add_plus_symbol(a) ;
                		result = b+" ( "+d+"x "+c+" ) "+a ;
                	}
            }         
          

            
            return result;         
        }       

        function add_plus_symbol( number ){
        		number = ""+number ;
        		if( number.charAt(0)=='-'){
            		return number;	
            	}else{
            		return "＋"+number ;
            	}
        }
        
        function f1( a , b ){
            
            if( b>=0){
                b= "+ "+b ;
            }            
            
            return "( "+a+"x "+b+" )<sup>2</sup>";         
        }
        
        function f2( a , b ){
            
            var ab2 ;
            if( b>=0){
                ab2= "+ "+2*a*b ;                
            }else{
                ab2= 2*a*b ;
            }
            
            
            return (a*a)+"x<sup>2</sup> "+ab2+"x + "+(b*b);         
        }
        
        function check(){
        
        var is = document.getElementsByTagName("input") ;
        for (var i = 0; i < is.length; i++) {
            if( is[i].dataset.a == is[i].value ){
            	//is[i].parentElement.style = "border: 2px solid green;"
            	is[i].parentElement.style = "background-color:lightgreen;"
            }else{
            	//is[i].parentElement.style = "border: 2px solid red;"
            	is[i].parentElement.style = "background-color:rgb(255, 89, 89);"
            }       
	
        }

	


        }
        
        var e = document.getElementById("data") ;
        q_type1( e , 5 , 1) ;
        
    </script>
</html>
